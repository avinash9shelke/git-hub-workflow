name: Using Re-usable Workflow Example
on:
  push:
    branches:
     - dev-branch
jobs:
  lint: 
   runs-on: ubuntu-latest
   steps:
     - name: Get the Code
       uses: actions/checkout@v3
     - name: Cache Dependencies
       uses: actions/cache@v3
       with:
         path: node_modules
         key: deps-node-modules-${{ hashFiles('**/package-lock.json') }}
     - name: Install Dependencies
       if: steps.cache.output.cache-hit !='true'
       run: npm-ci
     - name: Lint code
       run: npm run lint
  test: 
   runs-on: ubuntu-latest
   steps:
     - name: get code
       uses: actions/checkout@v3
     - name: Cache Dependencies
       uses: actions/cache@v3
       with:
         path: ~/.npm
         key: deps-node-modules-${{ hashFiles('**/package-lock.json') }} # what needs to be cache
     - name: Install Node JS
       uses: actions/setup-node@v3
       with:
         node-version: 18
     - name: Install Dependencies
       run: npm ci
     - name: Run Tests
       run: npm test
  deploy:
   needs: test # name for the job which want's to complete first
   uses: ./reusable-workflow.yml
